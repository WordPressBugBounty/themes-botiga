var botiga=botiga||{};botiga.quickView={init:function(){this.build(),this.events()},build:function(){var t=document.querySelectorAll(".botiga-quick-view"),a=document.querySelector(".botiga-quick-view-popup"),i=document.querySelector(".botiga-quick-view-popup-close-button"),o=document.querySelector(".botiga-quick-view-popup-content-ajax");if(null===a)return!1;i.addEventListener("click",function(t){t.preventDefault()}),a.addEventListener("click",function(t){null===t.target.closest(".botiga-quick-view-popup-content-ajax")&&a.classList.remove("opened")});for(var e=0;e<t.length;e++)t[e].addEventListener("click",function(t){t.preventDefault();var i=t.target.getAttribute("data-product-id"),t=t.target.getAttribute("data-nonce"),e=(a.classList.add("opened"),a.classList.add("loading"),new XMLHttpRequest);e.open("POST",botiga.ajaxurl,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=function(){var t,i;200<=this.status&&this.status<400&&(o.innerHTML=this.response,(i=(t=jQuery(o)).find(".woocommerce-product-gallery")).length&&(i.trigger("wc-product-gallery-before-init",[i.get(0),wc_single_product_params]),i.wc_product_gallery(wc_single_product_params),i.trigger("wc-product-gallery-after-init",[i.get(0),wc_single_product_params])),botiga.variationGallery&&botiga.variationGallery.init(t),botiga.sizeChart&&botiga.sizeChart.init(t),botiga.productSwatch&&botiga.productSwatch.variationMouseOver&&botiga.productSwatch.variationMouseOver(),i=document.querySelector(".botiga-quick-view-summary .variations_form"),"undefined"!=typeof wc_add_to_cart_variation_params&&jQuery(i).wc_variation_form(),botiga.qtyButton.init("quick-view"),void 0!==botiga.wishList&&botiga.wishList.init(),t.find(".variations_form").each(function(){if(!0===jQuery(this).data("misc-variations"))return!1;botiga.misc.moveResetVariationButton(jQuery(this)),botiga.misc.checkIfHasVariationSelected(jQuery(this)),jQuery(this).on("woocommerce_variation_select_change",function(){botiga.misc.checkIfHasVariationSelected(jQuery(this))}),jQuery(this).data("misc-variations",!0)}),window.dispatchEvent(new Event("botiga.quickview.ajax.loaded")),a.classList.remove("loading"))},e.send("action=botiga_quick_view_content&product_id="+i+"&nonce="+t)})},events:function(){var t=this;window.addEventListener("botiga.carousel.initialized",function(){t.build()})}},jQuery(document).ready(function(){botiga.quickView.init()});